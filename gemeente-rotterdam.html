<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-ar="بلدية روتردام" data-lang-en="Gemeente Rotterdam">Gemeente Rotterdam</title>
    <style>
        /* Default Light Mode Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            /* padding: 0; */ /* Removed */
            /* display: flex; */ /* Removed */
            /* justify-content: center; */
            /* align-items: flex-start; */
            min-height: 100vh;
            position: relative; /* Needed for menu */
            padding-top: 60px; /* Space for menu */
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- START NAVIGATION SIDEBAR STYLES --- */
        .menu-icon {
            position: absolute; top: 15px; left: 15px; width: 30px; height: 22px;
            cursor: pointer; z-index: 1001; display: flex; flex-direction: column;
            justify-content: space-between;
        }
        .menu-icon span { display: block; height: 3px; width: 100%; background-color: #333; border-radius: 3px; transition: background-color 0.3s; }
        #sidebar {
            position: fixed; top: 0; left: -250px; width: 250px; height: 100%;
            background-color: #fff; color: #333; box-shadow: 2px 0 5px rgba(0,0,0,0.2);
            padding-top: 60px; transition: left 0.3s ease-in-out, background-color 0.3s, color 0.3s;
            z-index: 1000; display: flex; flex-direction: column;
        }
        #sidebar.open { left: 0; }
        #sidebar ul { list-style: none; padding: 0; margin: 0; }
        #sidebar li a { display: block; padding: 15px 20px; color: #333; text-decoration: none; border-bottom: 1px solid #eee; font-weight: bold; }
        #sidebar li a:hover { background-color: #f4f4f4; }
         /* RTL adjustments for sidebar */
         [dir="rtl"] .menu-icon { left: auto; right: 15px; }
         [dir="rtl"] #sidebar { left: auto; right: -250px; box-shadow: -2px 0 5px rgba(0,0,0,0.2); }
         [dir="rtl"] #sidebar.open { left: auto; right: 0; }
         [dir="rtl"] #sidebar li a { text-align: right; }
        /* --- END NAVIGATION SIDEBAR STYLES --- */

        .container {
            width: 80%;
            max-width: 800px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin: 0 auto 20px auto; /* Centered */
            transition: background-color 0.3s, color 0.3s;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            transition: color 0.3s;
        }

        .links {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            padding: 20px 0;
        }

        .link-item {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .link-item-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
            width: 100%;
        }

        .link-item-header a {
            /* margin-right: 10px; */ /* LTR/RTL */
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }
        [dir="ltr"] .link-item-header a { margin-right: 10px; }
        [dir="rtl"] .link-item-header a { margin-left: 10px; }

        .link-item-header a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .heart-icon {
            cursor: pointer;
            font-size: 1.5em;
            color: #ccc;
            transition: color 0.2s ease-in-out;
            line-height: 1;
        }

        .heart-icon.favorited {
            color: red;
        }

        .link-item > span {
            display: block;
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
            width: 100%;
            transition: color 0.3s;
        }

        a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }

        a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .lang-switcher {
            text-align: center;
            margin-bottom: 20px;
        }

        .lang-switcher button, .theme-toggle-button-main {
            padding: 8px 15px;
            margin: 0 5px;
            cursor: pointer;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        .lang-switcher button:hover, .theme-toggle-button-main:hover {
            background-color: #eee;
        }

        /* --- START DARK MODE --- */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #f1f1f1;
        }
         /* Dark mode for Navigation */
         body.dark-mode .menu-icon span { background-color: #f1f1f1; }
         body.dark-mode #sidebar { background-color: #2c2c2c; color: #f1f1f1; box-shadow: 2px 0 5px rgba(255,255,255,0.1); }
         [dir="rtl"] body.dark-mode #sidebar { box-shadow: -2px 0 5px rgba(255,255,255,0.1); }
         body.dark-mode #sidebar li a { color: #f1f1f1; border-bottom: 1px solid #444; }
         body.dark-mode #sidebar li a:hover { background-color: #444; }

        body.dark-mode .container {
            background-color: #2c2c2c;
            color: #f1f1f1;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }
        body.dark-mode h1 {
            color: #f1f1f1;
        }
        body.dark-mode .link-item {
            background-color: #3a3a3a;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
        }
        body.dark-mode a {
            color: #5cadff;
        }
         body.dark-mode a:hover {
            color: #8ecaff;
        }
        body.dark-mode .link-item > span {
            color: #ccc;
        }
        body.dark-mode .lang-switcher button, body.dark-mode .theme-toggle-button-main {
             background-color: #555;
             color: #f1f1f1;
             border: 1px solid #777;
        }
        body.dark-mode .lang-switcher button:hover, body.dark-mode .theme-toggle-button-main:hover {
             background-color: #666;
        }
         /* --- END DARK MODE --- */
    </style>
</head>
<body>
    <!-- Navigation Sidebar -->
    <div class="menu-icon" id="menu-icon">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div id="sidebar">
        <ul>
            <li><a href="index.html" data-lang-ar="الرئيسية" data-lang-en="Home">Home</a></li>
            <li><a href="favorites.html" data-lang-ar="المفضلات" data-lang-en="Favorites">Favorites</a></li>
            <!-- Add other common links here -->
        </ul>
    </div>

    <div class="container">
        <div class="lang-switcher">
            <button id="lang-ar">العربية</button>
            <button id="lang-en">English</button>
            <button class="theme-toggle-button-main" id="theme-toggle" data-lang-ar="تبديل الوضع" data-lang-en="Toggle Theme">Toggle Theme</button>
        </div>
        <h1 data-lang-ar="بلدية روتردام" data-lang-en="Gemeente Rotterdam">Gemeente Rotterdam</h1>
        <div class="links">
            <div class="link-item" data-id="rotterdam-main">
                <div class="link-item-header">
                    <a href="https://www.rotterdam.nl/" target="_blank" data-lang-ar="الموقع الرسمي لبلدية روتردام" data-lang-en="Gemeente Rotterdam Official Website">Gemeente Rotterdam Official Website</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="الموقع الرسمي لبلدية روتردام" data-lang-en="The official website of the Municipality of Rotterdam"></span>
            </div>
            <div class="link-item" data-id="rotterdam-mijn-loket">
                <div class="link-item-header">
                    <a href="https://concern.ir.rotterdam.nl/mijnloket/?1" target="_blank" data-lang-ar="مكتبي" data-lang-en="Mijn loket">Mijn loket</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="من خلال هذا الموقع، يمكنك تنظيم أمورك مع بلدية روتردام، مثل الاطلاع على مواعيدك وطلباتك، وتنظيم العديد من الأمور بسهولة، بالإضافة إلى الاطلاع على بياناتك الشخصية" data-lang-en="Through this site, you can manage your affairs with the Municipality of Rotterdam, such as viewing your appointments and requests, easily managing many matters, and viewing your personal data"></span>
            </div>
            <div class="link-item" data-id="rotterdam-taxes">
                <div class="link-item-header">
                    <a href="https://am.rotterdam.nl/am/XUI/?realm=/alpha&authIndexType=service&authIndexValue=LoginComposite_Low&goto=https%3A%2F%2Fam.rotterdam.nl%3A443%2Fam%2Foauth2%2Fauthorize%3Fresponse_type%3Dcode%26client_id%3Dig-eso-client%26redirect_uri%3Dhttps%3A%2F%2Fconcern.ir.rotterdam.nl%2Frpa%2Fid_token%2Fcallback%26scope%3Dopenid%2520profile%26state%3Dam10bWgxaWlseG1ybjEyNXBvNWNvM3V3MHRwbXloNDovcnBhL3Jlc3RyaWN0ZWQvdm9yZGVyaW5nZW4_d2lja2tldC1jcnlwdD1lWaUw3ZUt2NEhBJndpY2tldC1jcnlwdD1LcjRpRXBNZjhNZw%26acr_values%3Ddigid_eherkenning%3Alow%26max_age%3D60%26acr%3Ddigid_eherkenning%253Alow%26acr_sig%3D3tYY7N3s09KuUxlr1Mht0AP-gpsSWfbZMTqSIHz9ZLc#/" target="_blank" data-lang-ar="عرض ودفع ضرائب البلدية" data-lang-en="View and Pay Municipal Taxes">View and Pay Municipal Taxes</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="من خلال هذا الموقع يمكنك الإطلاع على ضرائب البلدية وسدادها" data-lang-en="Through this site you can view and pay municipal taxes"></span>
            </div>
            <div class="link-item" data-id="mijnrbg">
                <div class="link-item-header">
                    <a href="https://mijnrbg.derbg.nl/zelf.regelen.php" target="_blank" data-lang-ar="ضرائب المياه والمجاري (RBG)" data-lang-en="Water and Sewage Taxes (RBG)">mijn RBG</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="هذا الموقع لعرض ضرائب المياه والمجاري وشغال فقط في بعض المناطق والبعض عندهم مواقع اخرى لترتيب الضرائب" data-lang-en="This site is for viewing water and sewage taxes and only works in some areas; others have different sites for tax arrangements"></span>
            </div>
            <div class="link-item" data-id="rotterdam-bijzondere-bijstand">
                <div class="link-item-header">
                    <a href="https://www.rotterdam.nl/bijzondere-bijstand" target="_blank" data-lang-ar="المساعدة الخاصة" data-lang-en="Special Assistance">Bijzondere bijstand</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="هذا الموقع يقدم مساعدة مالية للأشخاص الذين يواجهون مواقف خاصة أو غير متوقعة تتطلب إنفاق مال غير متاح لديهم. قد تكون هذه المساعدة على شكل قرض أو هدية، حسب الحالة." data-lang-en="This site provides financial assistance to people facing special or unexpected situations requiring spending unavailable money. This assistance may be a loan or a gift, depending on the situation."></span>
            </div>
            <div class="link-item" data-id="rotterdam-wijzigingen">
                <div class="link-item-header">
                    <a href="https://www.rotterdam.nl/wijzigingen-doorgeven" target="_blank" data-lang-ar="Wijzigingen doorgeven" data-lang-en="Wijzigingen doorgeven">Wijzigingen doorgeven</a>
                    <span class="heart-icon">♡</span>
                </div>
                <span data-lang-ar="هذا الموقع يتيح للمواطنين في روتردام تقديم تغييرات تتعلق بحالتهم الشخصية أو المالية، مثل تغيير الدخل، الحالة الاجتماعية أو السكنية، لضمان تحديث استحقاقاتهم المالية والإعانات بشكل صحيح." data-lang-en="This site allows citizens in Rotterdam to report changes related to their personal or financial situation, such as changes in income, marital status, or housing, to ensure their financial benefits and allowances are correctly updated."></span>
            </div>
        </div>
    </div>
    <script>
        const translatableElementsStatic = Array.from(document.querySelectorAll('[data-lang-ar]'));
        const btnAr = document.getElementById('lang-ar');
        const btnEn = document.getElementById('lang-en');
        const themeToggleButton = document.getElementById('theme-toggle');
        const titleElement = document.querySelector('title');
        let currentLang = document.documentElement.lang || 'ar';

        const translations = {
            "Gemeente Rotterdam": { ar: "بلدية روتردام", en: "Gemeente Rotterdam" },
            "Gemeente Rotterdam Official Website": { ar: "الموقع الرسمي لبلدية روتردام", en: "Gemeente Rotterdam Official Website" },
            "The official website...": { ar: "الموقع الرسمي لبلدية روتردام", en: "The official website of the Municipality of Rotterdam" },
            "Mijn loket": { ar: "مكتبي", en: "Mijn loket" },
            "Through this site, you can manage...": { ar: "من خلال هذا الموقع، يمكنك تنظيم أمورك مع بلدية روتردام، مثل الاطلاع على مواعيدك وطلباتك، وتنظيم العديد من الأمور بسهولة، بالإضافة إلى الاطلاع على بياناتك الشخصية", en: "Through this site, you can manage your affairs with the Municipality of Rotterdam, such as viewing your appointments and requests, easily managing many matters, and viewing your personal data" },
            "Toggle Theme": { ar: "تبديل الوضع", en: "Toggle Theme"},
            "View and Pay Municipal Taxes": {ar: "عرض ودفع ضرائب البلدية", en: "View and Pay Municipal Taxes"},
            "Through this site you can view...": {ar: "من خلال هذا الموقع يمكنك الإطلاع على ضرائب البلدية وسدادها", en: "Through this site you can view and pay municipal taxes"},
            "Water and Sewage Taxes (RBG)": {ar: "ضرائب المياه والمجاري (RBG)", en: "Water and Sewage Taxes (RBG)"},
            "This site is for viewing water...": {ar: "هذا الموقع لعرض ضرائب المياه والمجاري وشغال فقط في بعض المناطق والبعض عندهم مواقع اخرى لترتيب الضرائب", en: "This site is for viewing water and sewage taxes and only works in some areas; others have different sites for tax arrangements"},
            "Special Assistance": {ar: "المساعدة الخاصة", en: "Special Assistance"},
            "This site provides financial assistance...": {ar: "هذا الموقع يقدم مساعدة مالية للأشخاص الذين يواجهون مواقف خاصة أو غير متوقعة تتطلب إنفاق مال غير متاح لديهم. قد تكون هذه المساعدة على شكل قرض أو هدية، حسب الحالة.", en: "This site provides financial assistance to people facing special or unexpected situations requiring spending unavailable money. This assistance may be a loan or a gift, depending on the situation."},
            "Wijzigingen doorgeven": {ar: "تقديم التغييرات", en: "Wijzigingen doorgeven"},
            "This site allows citizens...": {ar: "هذا الموقع يتيح للمواطنين في روتردام تقديم تغييرات تتعلق بحالتهم الشخصية أو المالية، مثل تغيير الدخل، الحالة الاجتماعية أو السكنية، لضمان تحديث استحقاقاتهم المالية والإعانات بشكل صحيح.", en: "This site allows citizens in Rotterdam to report changes related to their personal or financial situation, such as changes in income, marital status, or housing, to ensure their financial benefits and allowances are correctly updated."},
            "Home": { ar: "الرئيسية", en: "Home" },
            "Favorites": { ar: "المفضلات", en: "Favorites" }
        };

        function updateToggleButtonText() {
            if (btnAr) btnAr.textContent = "العربية";
            if (btnEn) btnEn.textContent = "English";
            const isDarkMode = document.body.classList.contains('dark-mode');
            const key = "Toggle Theme";
            let buttonText = translations[key] ? (translations[key][currentLang] || translations[key]['en']) : "Toggle Theme";
            if (themeToggleButton) themeToggleButton.textContent = buttonText;
        }

        function setLanguage(lang) {
            translatableElementsStatic.forEach(el => {
                if (el.id === 'theme-toggle' || el.closest('.lang-switcher')) return;
                const key = el.dataset.langEn || el.textContent;

                if (el.closest('.link-item')) {
                    updateLinkItemLanguage(el.closest('.link-item'), lang);
                } else {
                    if (translations[key] && translations[key][lang]) {
                        if (el.tagName.toLowerCase() === 'title') document.title = translations[key][lang];
                        else el.textContent = translations[key][lang];
                    } else if (lang === 'en' && key) {
                        if (el.tagName.toLowerCase() === 'title') document.title = key;
                        else el.textContent = key;
                    } else if (lang === 'ar' && el.dataset.langAr) {
                        if (el.tagName.toLowerCase() === 'title') document.title = el.dataset.langAr;
                        else el.textContent = el.dataset.langAr;
                    }
                }
            });
            currentLang = lang;
            initializeHearts();
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            localStorage.setItem('preferredLanguage', lang);
            updateToggleButtonText();
        }

        btnAr.addEventListener('click', () => setLanguage('ar'));
        btnEn.addEventListener('click', () => setLanguage('en'));

        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark') {
            document.body.classList.add('dark-mode');
        }
        updateToggleButtonText();

        if (themeToggleButton) {
            themeToggleButton.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                let newTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
                updateToggleButtonText();
            });
        }

        const favoritesKey = 'userFavorites';
        function getFavorites() {
            const f = localStorage.getItem(favoritesKey);
            return f ? JSON.parse(f) : [];
        }
        function saveFavorites(f) {
            localStorage.setItem(favoritesKey, JSON.stringify(f));
        }
        function toggleFavorite(id, data) {
            let f = getFavorites();
            const idx = f.findIndex(fav => fav.id === id);
            if (idx > -1) {
                f.splice(idx, 1);
            } else {
                if (data) f.push(data);
            }
            saveFavorites(f);
        }
        function updateLinkItemLanguage(item, lang) {
            const link = item.querySelector('a');
            const desc = item.querySelector(':scope > span:not(.heart-icon)');
            if (link) {
                const linkKey = link.dataset.langEn;
                 if(translations[linkKey] && translations[linkKey][lang]) link.textContent = translations[linkKey][lang];
                 else if (lang === 'en' && linkKey) link.textContent = linkKey;
                 else if (lang === 'ar' && link.dataset.langAr) link.textContent = link.dataset.langAr;
            }
            if (desc) {
                const descKey = desc.dataset.langEn || `desc-${link?.dataset.langEn}`;
                 const simplifiedDescKey = "The official website...";

                 if(translations[descKey] && translations[descKey][lang]) desc.textContent = translations[descKey][lang];
                 else if(translations[simplifiedDescKey] && translations[simplifiedDescKey][lang]) desc.textContent = translations[simplifiedDescKey][lang];
                 else if (lang === 'en' && (descKey || simplifiedDescKey)) desc.textContent = desc.dataset.langEn || simplifiedDescKey;
                 else if (lang === 'ar' && desc.dataset.langAr) desc.textContent = desc.dataset.langAr;
                 else desc.textContent = '';
            }
        }
        document.querySelectorAll('.heart-icon').forEach(icon => {
            icon.addEventListener('click', (event) => {
                event.stopPropagation();
                const linkItem = icon.closest('.link-item');
                const header = icon.closest('.link-item-header');
                const link = header?.querySelector('a');
                const descriptionSpan = linkItem?.querySelector(':scope > span:not(.heart-icon)');
                const itemId = linkItem?.getAttribute('data-id');
                if (!linkItem || !link || !itemId) return;
                const isFavorited = icon.classList.toggle('favorited');
                icon.textContent = isFavorited ? '♥' : '♡';
                let itemData = isFavorited ? { id: itemId, href: link.getAttribute('href'), ar: link.getAttribute('data-lang-ar'), en: link.getAttribute('data-lang-en'), desc_ar: descriptionSpan?.getAttribute('data-lang-ar'), desc_en: descriptionSpan?.getAttribute('data-lang-en') } : null;
                toggleFavorite(itemId, itemData);
            });
        });
        function initializeHearts() {
            const favorites = getFavorites();
            const favoriteIds = favorites.map(fav => fav.id);
            document.querySelectorAll('.link-item').forEach(item => {
                const itemId = item.getAttribute('data-id');
                const heartIcon = item.querySelector('.heart-icon');
                if (heartIcon) {
                    if (favoriteIds.includes(itemId)) {
                        heartIcon.classList.add('favorited'); heartIcon.textContent = '♥';
                    } else {
                        heartIcon.classList.remove('favorited'); heartIcon.textContent = '♡';
                    }
                }
                updateLinkItemLanguage(item, currentLang);
            });
        }

        const preferredLanguage = localStorage.getItem('preferredLanguage');
        setLanguage(preferredLanguage || 'ar');

        // Translate sidebar links
        document.querySelectorAll('#sidebar a[data-lang-en]').forEach(el => {
            const key = el.dataset.langEn;
            if (translations[key] && translations[key][lang]) {
                el.textContent = translations[key][lang];
            } else if (lang === 'en' && key) {
                el.textContent = key;
            } else if (lang === 'ar' && el.dataset.langAr) {
                el.textContent = el.dataset.langAr;
            }
        });

        // --- START Navigation Sidebar Logic --- //
        const menuIcon = document.getElementById('menu-icon');
        const sidebar = document.getElementById('sidebar');

        if(menuIcon && sidebar) {
            menuIcon.addEventListener('click', () => {
                sidebar.classList.toggle('open');
            });

            // Optional: Close sidebar when clicking outside of it
            document.addEventListener('click', (event) => {
                if (!sidebar.contains(event.target) && !menuIcon.contains(event.target) && sidebar.classList.contains('open')) {
                    sidebar.classList.remove('open');
                }
            });
        }
        // --- END Navigation Sidebar Logic --- //
    </script>
</body>
</html> 