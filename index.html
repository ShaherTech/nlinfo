<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-ar="دليل الروابط" data-lang-en="Link Directory">Link Directory</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            /* display: flex; */ /* Removed to allow normal block flow */
            /* justify-content: center; */
            /* align-items: flex-start; */
            min-height: 100vh;
            position: relative; /* Needed for absolute positioning of menu icon if container isn't full width */
            padding-top: 50px; /* Add padding to prevent content overlap with fixed/absolute elements */
        }

        .menu-icon {
            position: absolute; /* Position relative to body or a positioned ancestor */
            top: 15px;
            left: 15px;
            width: 30px;
            height: 22px;
            cursor: pointer;
            z-index: 1001; /* Ensure it's above the sidebar */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .menu-icon span {
            display: block;
            height: 3px;
            width: 100%;
            background-color: #333;
            border-radius: 3px;
        }

        #sidebar {
            position: fixed; /* Fixed position relative to viewport */
            top: 0;
            left: -250px; /* Start hidden off-screen */
            width: 250px;
            height: 100%;
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0,0,0,0.2);
            padding-top: 60px; /* Space for content below menu icon */
            transition: left 0.3s ease-in-out;
            z-index: 1000;
        }

        #sidebar.open {
            left: 0; /* Slide in */
        }

        #sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #sidebar li a {
            display: block;
            padding: 15px 20px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            font-weight: bold;
        }

        #sidebar li a:hover {
            background-color: #f4f4f4;
        }

        .container {
            width: 80%;
            max-width: 800px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin: 20px auto 0; /* Center container and add margin top */
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .categories {
            display: grid;
            /* grid-template-columns: repeat(3, 1fr); */ /* Change from 3 columns */
            grid-template-columns: 1fr; /* Set to one column for vertical layout */
            gap: 20px;
        }

        .category {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative; /* Needed for absolute positioning of heart */
        }

        .category h2 {
            text-align: center;
            margin: 0 0 5px 0;
            display: flex; /* Use flex to align link and heart */
            justify-content: center; /* Center items */
            align-items: center; /* Vertically align items */
            position: relative; /* To contain the absolutely positioned heart */
        }

        .category h2 a {
            margin-right: 10px; /* Space between link and heart */
            /* Adjust link styling if needed */
        }

        .heart-icon {
            cursor: pointer;
            font-size: 1.5em; /* Make heart larger */
            color: #ccc; /* Default color (grey) */
            transition: color 0.2s ease-in-out;
            /* position: absolute; */ /* Removed absolute positioning */
            /* top: 50%; */
            /* right: 15px; */
            /* transform: translateY(-50%); */
        }

        .heart-icon.favorited {
            color: red;
        }

        .category span:not(.heart-icon) { /* Target only description span */
            display: block;
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
        }

        .category ul {
            display: none;
        }

        .category:focus-within ul {
            display: block;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }

        a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }

        a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .lang-switcher {
            text-align: center;
            margin-bottom: 20px;
        }

        .lang-switcher button {
            padding: 5px 10px;
            margin: 0 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="menu-icon" class="menu-icon">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <nav id="sidebar">
        <ul>
            <li><a href="favorites.html" data-lang-ar="المفضلات" data-lang-en="Favorites">Favorites</a></li>
            <li><a href="news.html" data-lang-ar="الأخبار" data-lang-en="News">News</a></li>
            <li><a href="notifications.html" data-lang-ar="الإشعارات" data-lang-en="Notifications">الإشعارات</a></li>
            <li><a href="faq.html" data-lang-ar="الأسئلة الشائعة" data-lang-en="FAQ">الأسئلة الشائعة</a></li>
            <!-- Add more links here if needed -->
        </ul>
    </nav>

    <div class="container">
        <div class="lang-switcher">
            <button id="lang-ar">العربية</button>
            <button id="lang-en">English</button>
        </div>

        <div class="intro-text" style="margin-bottom: 20px; padding: 15px; background-color: #eef; border-radius: 8px; text-align: center;">
            <p data-lang-ar="مرحباً بكم في موقعنا الجديد والمفيد لكل المتواجدين في هولندا! هذا الموقع هو بوابتك الشاملة للوصول إلى كل ما تحتاجه في هولندا. لقد قمنا بجمع أهم المواقع المفيدة في مكان واحد لتسهيل حياتكم، سواء كنتم وافدين جدد أو مقيمين منذ فترة. ستجدون هنا مصادر لتعلم اللغة الهولندية، وروابط لمواقع حكومية هامة، ومعلومات عن العمل والتدريب، بالإضافة إلى العديد من الأشياء المفيدة والضرورية لكل شخص في هولندا. هذا الموقع لا يزال قيد التطوير، ونسعى باستمرار لإضافة المزيد من المحتوى المفيد والمميز. إذا كانت لديكم أي أفكار أو اقتراحات ترغبون في إضافتها للموقع، يسعدنا انضمامكم إلى جروب الواتساب الخاص بنا ومشاركتنا أفكاركم القيمة عبر<br><a href='https://chat.whatsapp.com/IXWRNGrtrFcEpeZpqQ2y4F' target='_blank'>WhatsApp</a>.<br>نتمنى لكم تصفحاً مفيداً!" 
               data-lang-en="Welcome to our new and useful site for everyone in the Netherlands! This site is your comprehensive gateway to access everything you need in the Netherlands. We have gathered the most important useful sites in one place to make your life easier, whether you are newcomers or long-term residents. Here you will find resources for learning Dutch, links to important government sites, information about work and training, in addition to many useful and necessary things for everyone in the Netherlands. This site is still under development, and we are constantly striving to add more useful and distinctive content. If you have any ideas or suggestions you would like to add to the site, we would be happy for you to join our WhatsApp group and share your valuable ideas with us via<br><a href='https://chat.whatsapp.com/IXWRNGrtrFcEpeZpqQ2y4F' target='_blank'>WhatsApp</a>.<br>We wish you useful browsing!">
                <!-- Content will be replaced by JavaScript -->
            </p>
        </div>

        <h1 data-lang-ar="دليل الروابط" data-lang-en="Link Directory">Link Directory</h1>
        <div class="categories">
        
        <!-- Add data-id to each section, and heart icon span -->
        <section class="category" data-id="learning-dutch.html">
            <h2>
                <a href="learning-dutch.html" data-lang-ar="تعلم اللغة الهولندية" data-lang-en="Learning Dutch">Learning Dutch</a>
                <span class="heart-icon">♡</span>
            </h2>
        </section>

        <section class="category" data-id="government-sites.html">
            <h2>
                <a href="government-sites.html" data-lang-ar="مواقع حكومية" data-lang-en="Government Sites">Government Sites</a>
                <span class="heart-icon">♡</span>
            </h2>
        </section>

        <section class="category" data-id="work-and-training.html">
            <h2>
                <a href="work-and-training.html" data-lang-ar="العمل والتدريب" data-lang-en="Work and Training">Work and Training</a>
                <span class="heart-icon">♡</span>
            </h2>
        </section>

        <section class="category" data-id="gemeente-rotterdam.html">
            <h2>
                <a href="gemeente-rotterdam.html" data-lang-ar="بلدية روتردام" data-lang-en="Gemeente Rotterdam">Gemeente Rotterdam</a>
                <span class="heart-icon">♡</span>
            </h2>
        </section>

        <section class="category" data-id="other-useful-sites.html">
            <h2>
                <a href="other-useful-sites.html" data-lang-ar="مواقع اخرى مفيدة" data-lang-en="Other Useful Sites">Other Useful Sites</a>
                <span class="heart-icon">♡</span>
            </h2>
        </section>
        
         <section class="category" data-id="noodfonds-energie">
             <h2>
                 <a href="https://www.noodfondsenergie.nl/news#noodfonds-open-april" target="_blank" data-lang-ar="Noodfonds Energie" data-lang-en="Noodfonds Energie">Noodfonds Energie</a>
                 <span class="heart-icon">♡</span>
             </h2>
             <span data-lang-ar="سوف يبدا التقديم على صندوق الطوارئ لدعم الطاقة ب تاريخ 21 إبريل. لمعرفة اذا كنت مؤهلا ادخل على الرابط واقراء الشروط." 
                   data-lang-en="Applications for the Emergency Fund for energy support will begin on April 21st. To find out if you are eligible, enter the link and read the conditions.">
             </span>
         </section>
        
        <section class="category" data-id="health-insurance.html">
            <h2>
                <a href="health-insurance.html" data-lang-ar="الصحة والتأمينات" data-lang-en="Health and Insurance">Health and Insurance</a>
                 <span class="heart-icon">♡</span>
            </h2>
        </section>
        </div>
    </div>
    <script>
        const translatableElements = document.querySelectorAll('[data-lang-ar]');
        const btnAr = document.getElementById('lang-ar');
        const btnEn = document.getElementById('lang-en');
        const titleElement = document.querySelector('title');
        const introParagraph = document.querySelector('.intro-text p'); // Get the intro paragraph

        function setLanguage(lang) {
            translatableElements.forEach(el => {
                const text = el.getAttribute(`data-lang-${lang}`);
                if (text !== null) {
                    if (el.tagName.toLowerCase() === 'title') {
                        document.title = text;
                    } else if (el === introParagraph) {
                         // Special handling for intro text to keep HTML link
                         introParagraph.innerHTML = text;
                    } else {
                        el.textContent = text;
                    }
                }
            });
            // localStorage.setItem('preferredLang', lang);
        }

        btnAr.addEventListener('click', () => setLanguage('ar'));
        btnEn.addEventListener('click', () => setLanguage('en'));

        // const preferredLang = localStorage.getItem('preferredLang') || 'ar';
        setLanguage('ar'); // Initial load

        document.querySelectorAll('.category h2').forEach(header => {
            header.addEventListener('click', () => {
                const ul = header.nextElementSibling;
                ul.style.display = ul.style.display === 'block' ? 'none' : 'block';
            });
        });

        // Sidebar toggle logic
        const menuIcon = document.getElementById('menu-icon');
        const sidebar = document.getElementById('sidebar');

        menuIcon.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        // Optional: Close sidebar when clicking outside of it
        document.addEventListener('click', (event) => {
            if (!sidebar.contains(event.target) && !menuIcon.contains(event.target) && sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });

        // --- Favorites Logic ---
        const favoritesKey = 'userFavorites';

        // Function to get favorites from localStorage
        function getFavorites() {
            const favorites = localStorage.getItem(favoritesKey);
            return favorites ? JSON.parse(favorites) : [];
        }

        // Function to save favorites to localStorage
        function saveFavorites(favorites) {
            localStorage.setItem(favoritesKey, JSON.stringify(favorites));
        }

        // Function to toggle favorite status
        function toggleFavorite(categoryId, categoryData) {
            let favorites = getFavorites();
            const existingIndex = favorites.findIndex(fav => fav.id === categoryId);

            if (existingIndex > -1) {
                // Remove from favorites
                favorites.splice(existingIndex, 1);
            } else {
                // Add to favorites
                favorites.push(categoryData);
            }
            saveFavorites(favorites);
        }

        // Add event listeners to heart icons
        document.querySelectorAll('.heart-icon').forEach(icon => {
            icon.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent triggering other clicks if any
                const categorySection = icon.closest('.category');
                const categoryLink = categorySection.querySelector('h2 a');
                const categoryId = categorySection.getAttribute('data-id');
                const isFavorited = icon.classList.toggle('favorited');

                icon.textContent = isFavorited ? '♥' : '♡'; // Change icon appearance

                const categoryData = {
                    id: categoryId,
                    href: categoryLink.getAttribute('href'),
                    ar: categoryLink.getAttribute('data-lang-ar'),
                    en: categoryLink.getAttribute('data-lang-en'),
                    // Optionally add description data if needed on favorites page
                    // description_ar: categorySection.querySelector('span[data-lang-ar]')?.getAttribute('data-lang-ar'),
                    // description_en: categorySection.querySelector('span[data-lang-en]')?.getAttribute('data-lang-en')
                };

                toggleFavorite(categoryId, categoryData);
            });
        });

        // Function to initialize heart icons on page load
        function initializeHearts() {
            const favorites = getFavorites();
            const favoriteIds = favorites.map(fav => fav.id);

            document.querySelectorAll('.category').forEach(section => {
                const categoryId = section.getAttribute('data-id');
                const heartIcon = section.querySelector('.heart-icon');
                if (favoriteIds.includes(categoryId)) {
                    heartIcon.classList.add('favorited');
                    heartIcon.textContent = '♥';
                } else {
                    heartIcon.classList.remove('favorited');
                    heartIcon.textContent = '♡';
                }
            });
        }
        
        // Language switcher modification to re-initialize hearts if texts change
        const originalSetLanguage = setLanguage;
        window.setLanguage = function(lang) {
            originalSetLanguage(lang);
            initializeHearts(); // Re-apply heart states after language change
        }

        // Initial setup
        initializeHearts(); // Set initial heart states
        setLanguage('ar'); // Initial load (already calls initializeHearts via the override)

    </script>
</body>
</html>
